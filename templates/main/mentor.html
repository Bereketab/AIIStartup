


{% extends './base.html' %} 
{% block content %} {% load static %} 
{% include './header.html' %}
<script
  type="text/javascript"
  src="{% static 'js/moment.min.js' %}"
></script>
<script
  type="text/javascript"
  src="{% static 'js/daterangepicker.min.js' %}"
></script>
<link
  rel="stylesheet"
  type="text/css"
  href="{% static 'css/daterangepicker.css' %}"
/>
<div class="breadcrumbs">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center">
      <h2>Network</h2>
         <ol>
        <li><a class="active" href="{% url 'main:networks' 'startup' %}" >Startups</a></li>
        <li><a href="{% url 'main:networks' 'mentor' %}" >Mentors</a></li>
        <li><a href="{% url 'main:networks' 'incub' %}" >Incubators</a></li>
        <li><a href="{% url 'main:networks' 'hub' %}" >Hubs</a></li>
        <li><a href="{% url 'main:networks' 'acclerator' %}" >Acclerators</a></li>
        <li><a href="{% url 'main:networks' 'doner' %}" >Doners</a></li>
        <li><a href="{% url 'main:networks' 'government' %}" >Gov't Bodies</a></li>
      </ol>
    </div>
  </div>
</div>
<script>
  function getContent(typeOf){
    var getContentByName = '{% url 'main:get_content' 12345 %}';
  var url_mask = getContentByName.replace("12345", typeOf);
    $.ajax({
      
      url: url_mask,
      {% comment %} data: JSON.stringify(obj), {% endcomment %}
      dataType: 'html',
      type: "POST",
      success: function (data) {
        {% comment %} window.history.replaceState(null, null, 'hello'); {% endcomment %}
        $('#filter_replace').replaceWith(data)
        console.log(data)
        
      },
      error: function (data) {
      }
    });
    
  }
</script>
<!-- End Breadcrumbs -->

<!-- ======= Blog Section ======= -->
<section id="blog" class="blog">
  <div class="container" data-aos="fade-up">
    <div class="row g-5" id="filter_replace">
      <div class="col-lg-3">
        

        <div class="sidebar" style="justify-content: center;display: grid;">
          <div class="sidebar-item search-form">
            
          </div>
          <!-- End sidebar search formn-->

          <div class="sidebar-item categories">
            <form id="filterForm" style="justify-content: center;display: grid;" method="post">
              {% csrf_token %}
            <div class="accordion accordion-flush" id="accordionFlushExample">
              {% for filter in filters %}
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingOne">
                  <button
                    class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#flush-{{ forloop.counter }}"
                    aria-expanded="false"
                    aria-controls="flush-{{ forloop.counter }}"
                  >
                    <a href="#"
                      ><i class="bi bi-plus-circle"></i
                      >&nbsp;&nbsp;{{filter}}</a
                    >
                  </button>
                </h2>
                <div
                  id="flush-{{ forloop.counter }}"
                  class="accordion-collapse collapse"
                  aria-labelledby="flush-headingOne"
                  data-bs-parent="#accordionFlushExample"
                >
                  <div class="accordion-body">
                    <ul>
                      

                      {%if filter == 'Educational Level' %}
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="No formal education"
                          value="no_formal_education"
                          name='educational_level'
                        />
                        <label class="form-check-label" for="No formal education"
                          >No formal education</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Primary education"
                          value="primary_education"
                          name='educational_level'
                        />
                        <label class="form-check-label" for="Primary education"
                          >Primary education</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Secondary education or high school"
                          value="secondary_education_or_high_school"
                          name='educational_level'
                        />
                        <label class="form-check-label" for="Secondary education or high school"
                          >Secondary education or high school</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Vocational qualification"
                          value="vocational_qualification"
                          name='educational_level'
                        />
                        <label class="form-check-label" for="Vocational qualification"
                          >Vocational qualification</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Bachelors degree"
                          value="bachelors_degree"
                          name='educational_level'
                        />
                        <label class="form-check-label" for="Bachelors degree"
                          >Bachelors degree</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Masters degree"
                          value="masters_degree"
                          name='educational_level'
                        />
                        <label class="form-check-label" for="Masters degree"
                          >Masters degree</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Doctorate or higher"
                          value="doctorate_or_higher"
                          name='educational_level'
                        />
                        <label class="form-check-label" for="Doctorate or higher"
                          >Doctorate or higher</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Other"
                          value="other"
                          name='educational_level'
                        />
                        <label class="form-check-label" for="Other"
                          >Other</label
                        >
                      </div>
                      {%endif%} 



                      {%if filter == 'Educational Background' %}
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Arts and humanities"
                          value="arts_and_humanities"
                          name='educational_background'
                        />
                        <label class="form-check-label" for="Arts and humanities"
                          >Arts and humanities</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Business and management"
                          value="business_and_management"
                          name='educational_background'
                        />
                        <label class="form-check-label" for="Business and management"
                          >Business and management</label
                        >
                      </div> 
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Computer science"
                          value="computer_science"
                          name='educational_background'
                        />
                        <label class="form-check-label" for="Computer science"
                          >Computer science</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Education"
                          value="education"
                          name='educational_background'
                        />
                        <label class="form-check-label" for="Education"
                          >Education</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Engineering"
                          value="engineering"
                          name='educational_background'
                        />
                        <label class="form-check-label" for="Engineering"
                          >Engineering</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Health"
                          value="health"
                          name='educational_background'
                        />
                        <label class="form-check-label" for="Health"
                          >Health</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Law"
                          value="law"
                          name='educational_background'
                        />
                        <label class="form-check-label" for="Law"
                          >Law</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Social sciences"
                          value="social_sciences"
                          name='educational_background'
                        />
                        <label class="form-check-label" for="Social sciences"
                          >Social sciences</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Natural sciences"
                          value="natural_sciences"
                          name='educational_background'
                        />
                        <label class="form-check-label" for="Natural sciences"
                          >Natural sciences</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Other"
                          value="Other"
                          name='educational_background'
                        />
                        <label class="form-check-label" for="Other"
                          >Other</label
                        >
                      </div>
                      {%endif%}
                      {%if filter == 'Mentor Area' %}
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="legal advice"
                          value="legal_advice"
                          name='mentor_area'
                        />
                        <label class="form-check-label" for="legal advice"
                          >legal advice</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="business model"
                          value="business_model"
                          name='mentor_area'
                        />
                        <label class="form-check-label" for="business model"
                          >business model</label
                        >
                      </div> 
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="innovation management"
                          value="innovation_management"
                          name='mentor_area'
                        />
                        <label class="form-check-label" for="innovation management"
                          >innovation management</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="intellectual property"
                          value="intellectual_property"
                          name='mentor_area'
                        />
                        <label class="form-check-label" for="intellectual property"
                          >intellectual property</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Other"
                          value="Other"
                          name='mentor_area'
                        />
                        <label class="form-check-label" for="Other"
                          >Other</label
                        >
                      </div>
                      {% endif %}


                      {%if filter == 'AI Related Experience' %}
                      <div class="form-check form-switch">
                        <input class="form-check-input" name="airelated_expriance" type="checkbox" id="airelated_expriance" >
                        <label class="form-check-label" for="airelated_expriance">yes</label>
                      </div>
                      {% endif %}
                     {%if filter == 'Name' %}
                      <li>
                        <div class="checkboxes" ></div>
                        <script>
                          let a = "abcdefghijklmnopqrstuvwxyz".split("");

                          a.forEach((l) => {
                            jQuery(".checkboxes")
                              .append(`<input name='name' value='${l}' id='${l}' data-search-term="${l}" type="checkbox">
                              <label class= "inline-chheckbox" for="${l}">${l}</label>`);
                          });
                        </script>
                      </li>
                      {%endif%}
                      {%if filter == 'Sector' %}
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Entertainment"
                          value="Entertainment"
                          name='sector'
                        />
                        <label class="form-check-label" for="Entertainment"
                          >Entertainment</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Energy"
                          value="Energy"
                          name='sector'
                        />
                        <label class="form-check-label" for="Energy"
                          >Energy</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Logistics"
                          value="Logistics"
                          name='sector'
                        />
                        <label class="form-check-label" for="Logistics"
                          >Logistics</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Construction"
                          value="Construction"
                          name='sector'
                        />
                        <label class="form-check-label" for="Construction"
                          >Construction</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Health"
                          value="Health"
                          name='sector'
                        />
                        <label class="form-check-label" for="Health"
                          >Health</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Manufacturing"
                          value="Manufacturing"
                          name='sector'
                        />
                        <label class="form-check-label" for="Manufacturing"
                          >Manufacturing</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Cleaning"
                          value="Cleaning"
                          name='sector'
                        />
                        <label class="form-check-label" for="Cleaning"
                          >Cleaning</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Education"
                          value="Education"
                          name='sector'
                        />
                        <label class="form-check-label" for="Education"
                          >Education</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Finance"
                          value="Finance"
                          name='sector'
                        />
                        <label class="form-check-label" for="Finance"
                          >Finance</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Tourism"
                          value="Tourism"
                          name='sector'
                        />
                        <label class="form-check-label" for="Tourism"
                          >Tourism</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="IT"
                          value="IT"
                          name='sector'
                        />
                        <label class="form-check-label" for="IT"
                          >IT</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Agriculture"
                          value="Agriculture"
                          name='sector'
                        />
                        <label class="form-check-label" for="Agriculture"
                          >Agriculture</label
                        >
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="Other"
                          value="Other"
                          name='sector'
                        />
                        <label class="form-check-label" for="Other"
                          >Other</label
                        >
                      </div>
                      

                      {%endif%}
                      {%if filter == 'Address' %}
                      <select class="form-select" name="regionn" aria-label="Select Region" id="reg_">
                        <option value="" selected>Select Region</option>
                        <option value="Addis Ababa">Addis Ababa</option>
                        <option value="Afar">Afar</option>
                        <option value="Amhara">Amhara</option>
                        <option value="Benishangul-Gumuz">Benishangul-Gumuz</option>
                        <option value="Dire Dawa">Dire Dawa</option>
                        <option value="Gambela">Gambela</option>
                        <option value="Harari">Harari</option>
                        <option value="Oromia">Oromia</option>
                        <option value="Somali">Somali</option>
                        <option value="Sidama">Sidama</option>
                        <option value="SNNP">SNNP</option>
                        <option value="Tigray">Tigray</option>

                      </select>
                      <br>
                      <select class="form-select" aria-label="Default select example" name='wereda' id="wer_">
                        <option value="" selected>Select Wereda</option>
                      </select>
                      {%endif%}
                      <script>
                        $(function () {
                          $("#reg_").on("change", function () {
                            
                          geoserver_url= "http://localhost:8080/geoserver/cms/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=cms%3AETH_adm2&maxFeatures=50&outputFormat=application%2Fjson"
                        var self=this
                          $.getJSON( geoserver_url, function( data ) {
                              var items = [];
                              var wereda_names = data.features.filter(x=>x.properties['NAME_1']==self.value);
                              $("#wer_").empty()
                              $("#wer_").append('<option value="">select wereda</option>')
                             wereda_names.forEach(function(e){
                              $("#wer_").append('<option value="'+e.properties['NAME_2']+'">'+e.properties['NAME_2'])+'</option>';
                              
                             })
                            });
              
                          })
                          $('input[name="daterange"]').daterangepicker(
                            {
                              opens: "left",
                              autoUpdateInput: true,
                              locale:{
                                format: 'YYYY-MM-DD'
                              }
                      },
                           
                          ).val('');
                        });
                      </script>
                      {% comment %}
                      <li><a href="#">List one</a></li>
                      <li><a href="#">List one</a></li>
                      {% endcomment %}
                    </ul>
                  </div>
                </div>
              </div>
              {%endfor%}
            </div>
            <button type='submit' class="btn btn-primary"  id="filter">filter</button>
          </form>
          <script>
            $( "#filterForm" ).on( "submit", function( event ) {
              
              event.preventDefault();
              

                var obj = {}; // Define object

                // Loop over all checkboxes
                $('input[type="checkbox"]:checked').each(function() {
                    var name = $(this).attr('name'); // Get name of this checkbox
                
                    if (obj[name]) {
                        obj[name].push($(this).val()); // Push value
                    } else {
                        obj[name] = [$(this).val()]; // Create array and push value
                    }
                });
                
                
                obj[$('#reg_').attr('name')]=$('#reg_').val()
                obj[$('#wer_').attr('name')]=$('#wer_').val()
                const csrfmiddlewaretoken = document.querySelector(
                  "[name=csrfmiddlewaretoken]"
                ).value;
                // console.log(obj);
              $.ajax({
                  headers: { "X-CSRFToken": csrfmiddlewaretoken },
                  url: '{% url "main:filter" "mentor" %}',
                  data: JSON.stringify(obj),
                  dataType: 'html',
                  type: "POST",
                  success: function (data) {
                    $('#to_replaced').replaceWith(data)
                    
                  },
                  error: function (data) {
                  }
                }); 
                
            });
          </script>
          </div>
          <!-- End sidebar categories-->
        </div>
        <!-- End Blog Sidebar -->
      </div>
     

      <div class="col-lg-9" >
        <div class="row gy-12 posts-list" id="to_replaced">
          {% for mentor in mentors %}
          <div class="col-lg-4">
            <article class="d-flex flex-column">
              <h2 class="title">
                <img
                  src="{{mentor.profile.profile_pic.url}}"
                  alt=""
                  style="max-width: 50px"
                />&nbsp;
                <a href="blog-details.html">{{mentor.description.name}}</a>
              </h2>

              <div class="content">
                <p>{{mentor.description.description}}</p>
              </div>

              <div
                class="read-more mt-auto align-self-end"
                style="display: flex"
              >
                <button
                  class="btn btn-open"
                  data-name="{{mentor.description.name}}"
                  data-description="{{mentor.description.description}}"
                  data-sector="{% if mentor.description.sector == 'Other' %}{{ mentor.description.other_sector }}{% else %}{{ mentor.description.sector }}{% endif %}"                 
                  data-educationallevel="{{mentor.educational_level}}"
                  data-educationalbackground="{{mentor.educational_background}}"
                  data-mentorarea="{{mentor.mentor_area}}"
                  data-airelated ="{{mentor.airelated_expriance}}"
                  data-country="{{mentor.address.country}}"
                  data-region="{{mentor.address.location.region.region_name}}"
                  data-wereda="{{mentor.address.location.wereda_name}}"
                  data-phonenumber="{{mentor.address.phone_number}}"
                  data-website="{{mentor.address.website}}"
                  data-firstname="{{mentor.profile.user.first_name}}"
                  data-middilename="{{mentor.profile.middle_name}}"
                  data-lastname="{{mentor.profile.user.last_name}}"
                  data-email="{{mentor.profile.user.email}}"
                  data-profile="{{mentor.profile.profile_pic.url}}"
                  data-gender="{% if mentor.profile.gender == '0' %}{{'Male'}}{% else %}{{'Female'}}{% endif %}"                 

                
                  onclick="openModal(event)"
                >
                  Detail
                </button>
                {% if user.is_authenticated %}

                <form onsubmit=makeConnect(event,'{{mentor.profile.user}}','{{mentor.profile.user.id}}')>
                  {% csrf_token %}
                  <button class="btn btn-open " type="submit">
                    <div id='loading{{mentor.profile.user.id}}' class="spinner-border d-none"
                      style=" color:#0ea2bd; width: 3rem; height: 3rem;" role="status">
                      <span class="sr-only"></span>
                    </div>
                    {% if mentor.is_connected == 1 %}
                    <p style="color:#0ea2bd">Pending</p>
                    {% elif mentor.is_connected == 2 %}
                    <a href="{% url 'main:m_compose' %}?return_to={{ mentor.profile.user.id }}"
                      style="color:white">Message</a>
                    {% elif mentor.is_connected == 3 %}
                    <a id='connect{{mentor.profile.user.id}}'> Connect</a>
                    {% else %}
                    <a id='connect{{mentor.profile.user.id}}'> Connect</a>
                  </button>
                </form>
                  {% endif%}
                 
              </div>
              {%endif%}
            </article>
          </div>
          {%endfor%}
        </div>
      </div>
    </div>
  </div>
</section>


<section class="modal hidden">
  <div class="flex">
    <img src="" id="profile"  alt="user" />
    <button type="button" class="btn-close">⨉</button>
  </div>
  <div>
    <img src="" alt="Logo" id="logo" class="image" style="max-width: 200px; max-height: 200px;">
<p><strong>Name:</strong> <span id="name"></span></p>
<p><strong>Sector:</strong> <span id="sector"></span></p>
<p><strong>Country:</strong> <span id="country"></span></p>
<p><strong>Region Name:</strong> <span id="region-name"></span></p>
<p><strong>Wereda Name:</strong> <span id="wereda-name"></span></p>
<p><strong>Phone Number:</strong> <span id="phone-number"></span></p>
<p><strong>Website:</strong> <span id="website"></span></p>
<p><strong>First Name:</strong> <span id="first-name"></span></p>
<p><strong>Middle Name:</strong> <span id="middle-name"></span></p>
<p><strong>Last Name:</strong> <span id="last-name"></span></p>
<p><strong>Email:</strong> <span id="email"></span></p>
<p><strong>Contact:</strong> <span id="contact"></span></p>

  </div>
</section>

<div class="overlay hidden"></div>

<script>
 
  const modal = document.querySelector(".modal");
  const overlay = document.querySelector(".overlay");
  const openModalBtn = document.querySelector(".btn-open");
  const closeModalBtn = document.querySelector(".btn-close");
  const closeModal = function () {
    modal.classList.add("hidden");
    overlay.classList.add("hidden");
  };
  closeModalBtn.addEventListener("click", closeModal);
  overlay.addEventListener("click", closeModal);
  document.addEventListener("keydown", function (e) {
    if (e.key === "Escape" && !modal.classList.contains("hidden")) {
      closeModal();
    }
  });
  const openModal = function (e) {
    
    $("#sect").text(e.target.dataset.sector);

$("#logo").attr("src", e.target.dataset.logo);
$("#name").text(e.target.dataset.name);
$("#establishment-year").text(e.target.dataset.establishment_year);
$("#stage").text(e.target.dataset.stage);
$("#market-scope").text(e.target.dataset.market_scope);
$("#country").text(e.target.dataset.country);
$("#region-name").text(e.target.dataset.region_name);
$("#wereda-name").text(e.target.dataset.wereda_name);
$("#phone-number").text(e.target.dataset.phone_number);
$("#city-name").text(e.target.dataset.city_name);
$("#website").text(e.target.dataset.website);
$("#first-name").text(e.target.dataset.first_name);
$("#middle-name").text(e.target.dataset.middle_name);
$("#last-name").text(e.target.dataset.last_name);
$("#username").text(e.target.dataset.username);
$("#email").text(e.target.dataset.email);
$("#profile").attr("src", e.target.dataset.profile);
$("#contact").text(e.target.dataset.contact);
$("#sector").text(e.target.dataset.sector);
    modal.classList.remove("hidden");
    overlay.classList.remove("hidden");
  };
</script>
<script>
  $(document).ready(function () {
    // $.validator.addMethod('confirmPass', function(value) {
    //   if($('#startup_password').val() == $('#startup_password2').val()){ return true; } return false;
    // }, "Password and confirm password fields do not match");
    // $("#startupForm").validate()
    // $("#connectForm").validate()
    jQuery("#connectForm").validate();
    $("#connectForm").submit(function (event) {
      event.preventDefault();
      const csrfmiddlewaretoken = document.querySelector(
        "[name=csrfmiddlewaretoken]"
      ).value;

      var fd = new FormData();
      fd.append("connect", $(".connect").attr("id"));

      $.ajax({
        headers: { "X-CSRFToken": csrfmiddlewaretoken },
        url: '{% url "main:connect" %}',
        data: fd,
        processData: false,
        contentType: false,
        type: "POST",
        success: function (data) {
          
        },
        error: function (data) {
        }
      });
    });
  });

  
</script>
<script>
  function makeConnect(e, user, id) {
    e.preventDefault()
    $('#loading' + id).removeClass('d-none')
    $($('#connect' + id)).addClass('d-none')
    const csrfmiddlewaretoken = document.querySelector(
      "[name=csrfmiddlewaretoken]"
    ).value;
    $.ajax({
      headers: { "X-CSRFToken": csrfmiddlewaretoken },
      url: {% url 'main:connect'%},
      data: { 'userId': id },
      dataType: 'html',
      type: "POST",
      success: function (data) {
        console.log($('#connect' + id))
        setTimeout(() => {
          $('#connect' + id).replaceWith('<p style="color:#0ea2bd"> connect request sent !</p>')
          $('#loading' + id).addClass('d-none')
        }, "3000");
      },
      error: function (data) {
      }
    });
  }
</script>
{% endblock content %}
